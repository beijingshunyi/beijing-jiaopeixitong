<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>北京青翎舞蹈艺术中心 - 管理系统</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Microsoft YaHei', sans-serif; background: #f8f9fa; color: #333; }
        .sidebar { position: fixed; left: 0; top: 0; width: 250px; height: 100vh; background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; padding: 20px 0; z-index: 1000; }
        .sidebar-header { text-align: center; padding: 0 20px 20px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .sidebar-header h1 { font-size: 18px; font-weight: 600; margin-bottom: 8px; }
        .sidebar-header p { font-size: 14px; opacity: 0.8; }
        .nav-menu { list-style: none; margin-top: 20px; }
        .nav-menu li { margin-bottom: 5px; }
        .nav-menu a { display: block; padding: 12px 20px; color: rgba(255,255,255,0.8); text-decoration: none; transition: all 0.3s ease; font-size: 14px; border-left: 3px solid transparent; }
        .nav-menu a:hover { background: rgba(255,255,255,0.1); color: white; border-left-color: #3498db; transform: translateX(5px); }
        .nav-menu a.active { background: rgba(52,152,219,0.2); color: white; border-left-color: #3498db; }
        .main-content { margin-left: 250px; min-height: 100vh; background: #f8f9fa; }
        .top-nav { background: white; padding: 15px 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; }
        .top-nav h2 { font-size: 20px; color: #2c3e50; font-weight: 600; }
        .user-info { display: flex; align-items: center; gap: 10px; }
        .user-info span { color: #666; font-size: 14px; }
        .user-info button { padding: 6px 12px; background: #3498db; color: white; border: none; border-radius: 4px; font-size: 14px; cursor: pointer; }
        .content { padding: 20px; }
        .dashboard { margin-bottom: 20px; }
        .dashboard h3 { font-size: 16px; color: #2c3e50; margin-bottom: 15px; font-weight: 600; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .stat-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border-top: 3px solid #3498db; }
        .stat-card h4 { font-size: 13px; color: #7f8c8d; margin-bottom: 10px; text-transform: uppercase; }
        .stat-card p { font-size: 24px; font-weight: 700; color: #2c3e50; }
        .stat-card.dance { border-top-color: #e74c3c; }
        .stat-card.course { border-top-color: #2ecc71; }
        .stat-card.attendance { border-top-color: #f39c12; }
        .stat-card.revenue { border-top-color: #9b59b6; }
        .api-section { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin-bottom: 20px; }
        .api-section h3 { font-size: 16px; color: #2c3e50; margin-bottom: 15px; font-weight: 600; }
        .api-info { background: #f8f9fa; padding: 15px; border-radius: 6px; border-left: 3px solid #3498db; margin-bottom: 20px; }
        .api-info h4 { font-size: 14px; color: #2c3e50; margin-bottom: 8px; }
        .api-info p { font-size: 13px; color: #6c757d; margin-bottom: 6px; }
        .api-endpoints { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 10px; }
        .endpoint-card { background: #f8f9fa; padding: 15px; border-radius: 6px; border-left: 3px solid #3498db; }
        .endpoint-card h5 { font-size: 13px; color: #2c3e50; margin-bottom: 6px; font-weight: 600; }
        .endpoint-card p { font-size: 12px; color: #6c757d; }
        .copyright { background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; padding: 30px 20px; margin-top: 30px; }
        .copyright-content { max-width: 1000px; margin: 0 auto; }
        .copyright-header { text-align: center; margin-bottom: 20px; }
        .copyright-header h3 { font-size: 16px; font-weight: 600; margin-bottom: 8px; }
        .copyright-header p { font-size: 13px; opacity: 0.8; }
        .copyright-info { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .info-item h4 { font-size: 13px; font-weight: 600; margin-bottom: 10px; color: #3498db; text-transform: uppercase; }
        .info-item p { font-size: 13px; line-height: 1.5; opacity: 0.8; }
        .copyright-footer { text-align: center; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); }
        .copyright-footer p { font-size: 12px; opacity: 0.7; }
        .tab-content { margin-bottom: 20px; }
        .tab-pane { display: none; }
        .tab-pane.active { display: block; }
        @media (max-width: 768px) { .sidebar { width: 200px; } .main-content { margin-left: 200px; } .content { padding: 15px; } .stats-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <h1>北京青翎舞蹈艺术中心</h1>
            <p>管理系统</p>
        </div>
        <ul class="nav-menu">
            <li><a href="#" class="active" data-tab="dashboard">首页仪表盘</a></li>
            <li><a href="#" data-tab="students">学员管理</a></li>
            <li><a href="#" data-tab="courses">课程管理</a></li>
            <li><a href="#" data-tab="attendance">考勤管理</a></li>
            <li><a href="#" data-tab="finance">财务管理</a></li>
            <li><a href="#" data-tab="reports">统计报表</a></li>
            <li><a href="#" data-tab="settings">系统设置</a></li>
            <li><a href="#" data-tab="api-test">API测试工具</a></li>
        </ul>
    </div>
    
    <div class="main-content">
        <div class="top-nav">
            <h2>北京青翎舞蹈艺术中心</h2>
            <div class="user-info">
                <span>管理员</span>
                <button>退出登录</button>
            </div>
        </div>
        
        <div class="content">
            <div class="tab-content">
                <div id="dashboard" class="tab-pane active">
                    <div class="dashboard">
                        <h3>系统概览</h3>
                        <div class="stats-grid" id="system-stats">
                            <div class="stat-card dance">
                                <h4>总学员数</h4>
                                <p>加载中...</p>
                            </div>
                            <div class="stat-card course">
                                <h4>总课程数</h4>
                                <p>加载中...</p>
                            </div>
                            <div class="stat-card attendance">
                                <h4>今日考勤</h4>
                                <p>加载中...</p>
                            </div>
                            <div class="stat-card revenue">
                                <h4>总收入</h4>
                                <p>加载中...</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="api-section">
                        <h3>API接口信息</h3>
                        <div class="api-info">
                            <h4>北京青翎舞蹈艺术中心管理系统API</h4>
                            <p>版本: 1.0.0</p>
                            <p>请参考以下API端点进行系统操作</p>
                        </div>
                        
                        <div class="api-endpoints">
                            <div class="endpoint-card">
                                <h5>认证接口</h5>
                                <p>/api/auth/*</p>
                            </div>
                            <div class="endpoint-card">
                                <h5>学员接口</h5>
                                <p>/api/student/*</p>
                            </div>
                            <div class="endpoint-card">
                                <h5>教师接口</h5>
                                <p>/api/teacher/*</p>
                            </div>
                            <div class="endpoint-card">
                                <h5>教务接口</h5>
                                <p>/api/staff/*</p>
                            </div>
                            <div class="endpoint-card">
                                <h5>管理员接口</h5>
                                <p>/api/admin/*</p>
                            </div>
                            <div class="endpoint-card">
                                <h5>健康检查</h5>
                                <p>/health</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="students" class="tab-pane">
                    <div class="api-section">
                        <h3>学员管理</h3>
                        <div class="form-group" style="margin-bottom: 20px;">
                            <button onclick="loadStudents()" class="btn btn-primary" style="padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer;">加载学员列表</button>
                        </div>
                        <div id="students-list" style="margin-top: 20px;">
                            <table class="table" style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                                <thead>
                                    <tr style="background: #f8f9fa; border-bottom: 2px solid #dee2e6;">
                                        <th style="padding: 12px; text-align: left;">ID</th>
                                        <th style="padding: 12px; text-align: left;">姓名</th>
                                        <th style="padding: 12px; text-align: left;">邮箱</th>
                                        <th style="padding: 12px; text-align: left;">角色</th>
                                        <th style="padding: 12px; text-align: left;">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="students-table-body">
                                    <tr>
                                        <td colspan="5" style="padding: 20px; text-align: center; color: #6c757d;">点击"加载学员列表"按钮查看学员</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="courses" class="tab-pane">
                    <div class="api-section">
                        <h3>课程管理</h3>
                        <div class="form-group" style="margin-bottom: 20px;">
                            <button onclick="loadCourses()" class="btn btn-primary" style="padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer;">加载课程列表</button>
                            <button onclick="showCreateCourseForm()" class="btn btn-success" style="padding: 10px 20px; background: #2ecc71; color: white; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">创建课程</button>
                        </div>
                        <div id="courses-list" style="margin-top: 20px;">
                            <table class="table" style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                                <thead>
                                    <tr style="background: #f8f9fa; border-bottom: 2px solid #dee2e6;">
                                        <th style="padding: 12px; text-align: left;">ID</th>
                                        <th style="padding: 12px; text-align: left;">课程名称</th>
                                        <th style="padding: 12px; text-align: left;">课程代码</th>
                                        <th style="padding: 12px; text-align: left;">学分</th>
                                        <th style="padding: 12px; text-align: left;">课时</th>
                                        <th style="padding: 12px; text-align: left;">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="courses-table-body">
                                    <tr>
                                        <td colspan="6" style="padding: 20px; text-align: center; color: #6c757d;">点击"加载课程列表"按钮查看课程</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="attendance" class="tab-pane">
                    <div class="api-section">
                        <h3>考勤管理</h3>
                        <div class="form-group" style="margin-bottom: 20px;">
                            <button onclick="loadAttendance()" class="btn btn-primary" style="padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer;">加载考勤记录</button>
                        </div>
                        <div id="attendance-list" style="margin-top: 20px;">
                            <table class="table" style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                                <thead>
                                    <tr style="background: #f8f9fa; border-bottom: 2px solid #dee2e6;">
                                        <th style="padding: 12px; text-align: left;">ID</th>
                                        <th style="padding: 12px; text-align: left;">学员姓名</th>
                                        <th style="padding: 12px; text-align: left;">课程</th>
                                        <th style="padding: 12px; text-align: left;">日期</th>
                                        <th style="padding: 12px; text-align: left;">状态</th>
                                        <th style="padding: 12px; text-align: left;">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="attendance-table-body">
                                    <tr>
                                        <td colspan="6" style="padding: 20px; text-align: center; color: #6c757d;">点击"加载考勤记录"按钮查看考勤</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="finance" class="tab-pane">
                    <div class="dashboard">
                        <h3>财务统计</h3>
                        <div class="stats-grid" id="finance-stats">
                            <div class="stat-card revenue">
                                <h4>总收入</h4>
                                <p id="total-income">¥0.00</p>
                            </div>
                            <div class="stat-card dance">
                                <h4>总支出</h4>
                                <p id="total-expense">¥0.00</p>
                            </div>
                            <div class="stat-card course">
                                <h4>净利润</h4>
                                <p id="net-profit">¥0.00</p>
                            </div>
                            <div class="stat-card attendance">
                                <h4>本月收入</h4>
                                <p id="monthly-income">¥0.00</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="api-section">
                        <h3>收支明细</h3>
                        <div class="form-group" style="margin-bottom: 20px;">
                            <button onclick="loadFinancialRecords()" class="btn btn-primary" style="padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer;">加载财务记录</button>
                            <button onclick="showAddPaymentForm()" class="btn btn-success" style="padding: 10px 20px; background: #2ecc71; color: white; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">添加收入</button>
                            <button onclick="showAddExpenseForm()" class="btn btn-warning" style="padding: 10px 20px; background: #f39c12; color: white; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">添加支出</button>
                            <button onclick="loadFinancialStats()" class="btn btn-info" style="padding: 10px 20px; background: #17a2b8; color: white; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">刷新统计</button>
                        </div>
                        <div id="financial-records-list" style="margin-top: 20px;">
                            <table class="table" style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                                <thead>
                                    <tr style="background: #f8f9fa; border-bottom: 2px solid #dee2e6;">
                                        <th style="padding: 12px; text-align: left;">ID</th>
                                        <th style="padding: 12px; text-align: left;">类型</th>
                                        <th style="padding: 12px; text-align: left;">金额</th>
                                        <th style="padding: 12px; text-align: left;">描述</th>
                                        <th style="padding: 12px; text-align: left;">日期</th>
                                        <th style="padding: 12px; text-align: left;">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="financial-records-table-body">
                                    <tr>
                                        <td colspan="6" style="padding: 20px; text-align: center; color: #6c757d;">点击"加载财务记录"按钮查看财务数据</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="reports" class="tab-pane">
                    <div class="api-section">
                        <h3>统计报表</h3>
                        <div class="form-group" style="margin-bottom: 20px;">
                            <button onclick="loadReports()" class="btn btn-primary" style="padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer;">加载报表</button>
                        </div>
                        <div id="reports-list" style="margin-top: 20px;">
                            <p style="color: #6c757d; padding: 20px; text-align: center;">报表功能开发中...</p>
                        </div>
                    </div>
                </div>
                
                <div id="settings" class="tab-pane">
                    <div class="api-section">
                        <h3>系统设置</h3>
                        <div class="form-group" style="margin-bottom: 20px;">
                            <p style="color: #6c757d; padding: 20px; text-align: center;">系统设置功能开发中...</p>
                        </div>
                    </div>
                </div>
                
                <div id="api-test" class="tab-pane">
                    <div class="api-section">
                        <h3>API测试工具</h3>
                        <div class="form-group" style="margin-bottom: 20px;">
                            <p style="color: #6c757d; padding: 20px; text-align: center;">API测试工具开发中...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="copyright">
                <div class="copyright-content">
                    <div class="copyright-header">
                        <h3>北京青翎舞蹈艺术中心</h3>
                        <p>专业成人舞蹈艺术教育 · 商业演出策划 · 企业年会编排</p>
                    </div>
                    <div class="copyright-info">
                        <div class="info-item">
                            <h4>关于我们</h4>
                            <p>北京青翎舞蹈艺术中心由北京青翎文化传播有限公司全资所有并运营，致力于提供专业的成人舞蹈艺术教育服务，拥有经验丰富的教师团队和完善的教学体系。</p>
                        </div>
                        <div class="info-item">
                            <h4>联系方式</h4>
                            <p>机构地址：北京市东城区崇文门北京商界A座8楼818</p>
                            <p>联系电话：15011258120</p>
                            <p>投诉举报：18363070253</p>
                        </div>
                        <div class="info-item">
                            <h4>服务项目</h4>
                            <p>专业成人舞蹈艺术教育</p>
                            <p>商业演出策划</p>
                            <p>企业年会编排</p>
                        </div>
                    </div>
                    <div class="copyright-footer">
                        <p>&copy; 2025 北京青翎文化传播有限公司 版权所有 All Rights Reserved</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Tab切换功能
        document.querySelectorAll('.nav-menu a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const tabId = this.getAttribute('data-tab');
                
                // 移除所有active类
                document.querySelectorAll('.nav-menu a').forEach(a => a.classList.remove('active'));
                document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
                
                // 添加active类到当前点击的元素
                this.classList.add('active');
                document.getElementById(tabId).classList.add('active');
                
                // 加载对应的数据
                if (tabId === 'dashboard') {
                    loadSystemStats();
                }
            });
        });
        
        // 加载系统统计数据
        async function loadSystemStats() {
            try {
                const response = await fetch('/api/stats');
                const data = await response.json();
                
                if (data.success) {
                    const stats = data.stats;
                    document.querySelector('#system-stats .stat-card.dance p').textContent = stats.totalStudents || 0;
                    document.querySelector('#system-stats .stat-card.course p').textContent = stats.totalCourses || 0;
                    document.querySelector('#system-stats .stat-card.attendance p').textContent = stats.todayAttendance || 0;
                    document.querySelector('#system-stats .stat-card.revenue p').textContent = '¥' + (stats.totalRevenue || 0).toFixed(2);
                }
            } catch (error) {
                console.error('加载统计数据失败:', error);
            }
        }
        
        // 加载学员列表
        async function loadStudents() {
            try {
                const response = await fetch('/api/student');
                const data = await response.json();
                
                if (data.success) {
                    const tbody = document.getElementById('students-table-body');
                    tbody.innerHTML = '';
                    
                    data.students.forEach(student => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${student.id}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${student.name}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${student.email}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${student.role}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">
                                <button onclick="editStudent(${student.id})" style="padding: 5px 10px; background: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer; margin-right: 5px;">编辑</button>
                                <button onclick="deleteStudent(${student.id})" style="padding: 5px 10px; background: #e74c3c; color: white; border: none; border-radius: 3px; cursor: pointer;">删除</button>
                            </td>
                        `;
                        tbody.appendChild(row);
                    });
                }
            } catch (error) {
                console.error('加载学员列表失败:', error);
                alert('加载学员列表失败');
            }
        }
        
        // 加载课程列表
        async function loadCourses() {
            try {
                const response = await fetch('/api/course');
                const data = await response.json();
                
                if (data.success) {
                    const tbody = document.getElementById('courses-table-body');
                    tbody.innerHTML = '';
                    
                    data.courses.forEach(course => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${course.id}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${course.name}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${course.code}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${course.credits}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${course.hours}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">
                                <button onclick="editCourse(${course.id})" style="padding: 5px 10px; background: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer; margin-right: 5px;">编辑</button>
                                <button onclick="deleteCourse(${course.id})" style="padding: 5px 10px; background: #e74c3c; color: white; border: none; border-radius: 3px; cursor: pointer;">删除</button>
                            </td>
                        `;
                        tbody.appendChild(row);
                    });
                }
            } catch (error) {
                console.error('加载课程列表失败:', error);
                alert('加载课程列表失败');
            }
        }
        
        // 加载考勤记录
        async function loadAttendance() {
            try {
                const response = await fetch('/api/attendance');
                const data = await response.json();
                
                if (data.success) {
                    const tbody = document.getElementById('attendance-table-body');
                    tbody.innerHTML = '';
                    
                    data.attendance.forEach(record => {
                        const row = document.createElement('tr');
                        const statusClass = record.status === 'present' ? 'color: #2ecc71;' : (record.status === 'absent' ? 'color: #e74c3c;' : 'color: #f39c12;');
                        const statusText = record.status === 'present' ? '出勤' : (record.status === 'absent' ? '缺勤' : '请假');
                        row.innerHTML = `
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${record.id}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${record.studentName}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${record.courseName}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${new Date(record.date).toLocaleDateString('zh-CN')}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6; ${statusClass}">${statusText}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">
                                <button onclick="editAttendance(${record.id})" style="padding: 5px 10px; background: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer; margin-right: 5px;">编辑</button>
                                <button onclick="deleteAttendance(${record.id})" style="padding: 5px 10px; background: #e74c3c; color: white; border: none; border-radius: 3px; cursor: pointer;">删除</button>
                            </td>
                        `;
                        tbody.appendChild(row);
                    });
                }
            } catch (error) {
                console.error('加载考勤记录失败:', error);
                alert('加载考勤记录失败');
            }
        }
        
        // 加载财务统计
        async function loadFinancialStats() {
            try {
                const response = await fetch('/api/financial/stats');
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('total-income').textContent = '¥' + (data.stats.totalIncome || 0).toFixed(2);
                    document.getElementById('total-expense').textContent = '¥' + (data.stats.totalExpense || 0).toFixed(2);
                    document.getElementById('net-profit').textContent = '¥' + (data.stats.netProfit || 0).toFixed(2);
                    document.getElementById('monthly-income').textContent = '¥' + (data.stats.monthlyIncome || 0).toFixed(2);
                }
            } catch (error) {
                console.error('加载财务统计失败:', error);
                alert('加载财务统计失败');
            }
        }
        
        // 加载财务记录
        async function loadFinancialRecords() {
            try {
                const response = await fetch('/api/financial/records');
                const data = await response.json();
                
                if (data.success) {
                    const tbody = document.getElementById('financial-records-table-body');
                    tbody.innerHTML = '';
                    
                    data.records.forEach(record => {
                        const row = document.createElement('tr');
                        const typeClass = record.type === 'income' ? 'color: #2ecc71;' : 'color: #e74c3c;';
                        const typeText = record.type === 'income' ? '收入' : '支出';
                        row.innerHTML = `
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${record.id}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6; ${typeClass}">${typeText}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">¥${record.amount.toFixed(2)}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${record.description}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">${new Date(record.date).toLocaleDateString('zh-CN')}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">
                                <button onclick="editFinancialRecord(${record.id})" style="padding: 5px 10px; background: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer; margin-right: 5px;">编辑</button>
                                <button onclick="deleteFinancialRecord(${record.id})" style="padding: 5px 10px; background: #e74c3c; color: white; border: none; border-radius: 3px; cursor: pointer;">删除</button>
                            </td>
                        `;
                        tbody.appendChild(row);
                    });
                }
            } catch (error) {
                console.error('加载财务记录失败:', error);
                alert('加载财务记录失败');
            }
        }
        
        // 添加收入表单
        function showAddPaymentForm() {
            const description = prompt('请输入收入描述:');
            if (!description) return;
            
            const amount = prompt('请输入收入金额:');
            if (!amount || isNaN(amount)) {
                alert('请输入有效的金额');
                return;
            }
            
            addFinancialRecord('income', parseFloat(amount), description);
        }
        
        // 添加支出表单
        function showAddExpenseForm() {
            const description = prompt('请输入支出描述:');
            if (!description) return;
            
            const amount = prompt('请输入支出金额:');
            if (!amount || isNaN(amount)) {
                alert('请输入有效的金额');
                return;
            }
            
            addFinancialRecord('expense', parseFloat(amount), description);
        }
        
        // 添加财务记录
        async function addFinancialRecord(type, amount, description) {
            try {
                const response = await fetch('/api/financial/record', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ type, amount, description })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('添加成功');
                    loadFinancialRecords();
                    loadFinancialStats();
                } else {
                    alert('添加失败: ' + data.message);
                }
            } catch (error) {
                console.error('添加财务记录失败:', error);
                alert('添加财务记录失败');
            }
        }
        
        // 编辑财务记录
        async function editFinancialRecord(id) {
            const description = prompt('请输入新的描述:');
            if (!description) return;
            
            const amount = prompt('请输入新的金额:');
            if (!amount || isNaN(amount)) {
                alert('请输入有效的金额');
                return;
            }
            
            try {
                const response = await fetch(`/api/financial/record/${id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ description, amount: parseFloat(amount) })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('更新成功');
                    loadFinancialRecords();
                    loadFinancialStats();
                } else {
                    alert('更新失败: ' + data.message);
                }
            } catch (error) {
                console.error('更新财务记录失败:', error);
                alert('更新财务记录失败');
            }
        }
        
        // 删除财务记录
        async function deleteFinancialRecord(id) {
            if (!confirm('确定要删除这条记录吗？')) return;
            
            try {
                const response = await fetch(`/api/financial/record/${id}`, {
                    method: 'DELETE'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('删除成功');
                    loadFinancialRecords();
                    loadFinancialStats();
                } else {
                    alert('删除失败: ' + data.message);
                }
            } catch (error) {
                console.error('删除财务记录失败:', error);
                alert('删除财务记录失败');
            }
        }
        
        // 编辑学员
        async function editStudent(id) {
            alert('编辑学员功能开发中...');
        }
        
        // 删除学员
        async function deleteStudent(id) {
            if (!confirm('确定要删除这个学员吗？')) return;
            alert('删除学员功能开发中...');
        }
        
        // 编辑课程
        async function editCourse(id) {
            alert('编辑课程功能开发中...');
        }
        
        // 删除课程
        async function deleteCourse(id) {
            if (!confirm('确定要删除这个课程吗？')) return;
            alert('删除课程功能开发中...');
        }
        
        // 创建课程
        function showCreateCourseForm() {
            alert('创建课程功能开发中...');
        }
        
        // 编辑考勤
        async function editAttendance(id) {
            alert('编辑考勤功能开发中...');
        }
        
        // 删除考勤
        async function deleteAttendance(id) {
            if (!confirm('确定要删除这条考勤记录吗？')) return;
            alert('删除考勤功能开发中...');
        }
        
        // 加载报表
        async function loadReports() {
            alert('报表功能开发中...');
        }
        
        // 页面加载时初始化
        window.onload = function() {
            loadSystemStats();
        };
    </script>
</body>
</html>